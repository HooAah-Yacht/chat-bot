# 📄 요트 문서 PDF 분석 호환성 가이드

## 📋 개요

같은 요트 메뉴얼이라도 **PDF 파일 형식**에 따라 AI 분석이 성공하거나 실패할 수 있습니다. 이 문서는 어떤 형식의 PDF가 분석 가능한지, 어떤 형식이 불가능한지를 정리합니다.

---

## ✅ 분석 가능한 PDF 형식

### 1. 텍스트 기반 PDF (Text-based PDF)
**특징:**
- PDF 내부에 실제 텍스트 데이터가 포함됨
- 텍스트를 선택/복사할 수 있음
- 파일 크기가 상대적으로 작음

**예시:**
- Microsoft Word에서 PDF로 저장한 문서
- Adobe InDesign, LaTeX 등으로 생성한 PDF
- 대부분의 최신 오너스 매뉴얼

**분석 성공률:** ⭐⭐⭐⭐⭐ (95% 이상)

---

### 2. 하이브리드 PDF (Hybrid PDF)
**특징:**
- 텍스트와 이미지가 혼합
- 텍스트 부분은 선택 가능
- 일부 페이지는 스캔 이미지일 수 있음

**예시:**
- 스캔된 이미지 + 텍스트 레이어가 추가된 PDF
- 사진이 많은 매뉴얼

**분석 성공률:** ⭐⭐⭐⭐ (70-90%)
- 텍스트 부분만 분석됨
- 이미지 내 텍스트는 분석 불가

---

### 3. 간단한 레이아웃 PDF
**특징:**
- 단순한 텍스트 배치
- 복잡한 테이블이나 다이어그램이 적음
- 일관된 폰트 사용

**예시:**
- 클래스 규칙서 (Class Rules)
- 간단한 기술 사양서

**분석 성공률:** ⭐⭐⭐⭐⭐ (90% 이상)

---

## ❌ 분석 불가능한 PDF 형식

### 1. 스캔된 이미지 PDF (Image-only PDF)
**특징:**
- PDF 내부에 이미지만 포함
- 텍스트를 선택할 수 없음
- 파일 크기가 큼 (고해상도 스캔)
- OCR(광학 문자 인식)이 필요함

**예시:**
- 종이 문서를 스캔한 PDF
- 오래된 매뉴얼을 스캔한 버전

**분석 실패 이유:**
```
❌ PDF에서 텍스트를 추출할 수 없습니다.
```

**해결 방안:**
- OCR 기능 추가 필요 (Tesseract OCR, Google Cloud Vision API 등)
- 또는 텍스트 기반 PDF로 변환

**분석 성공률:** ⭐ (0-10%)

---

### 2. 암호화된 PDF (Password Protected)
**특징:**
- 비밀번호로 보호됨
- 열람 시 비밀번호 필요

**예시:**
- 보안이 중요한 기술 문서
- 회사 내부 문서

**분석 실패 이유:**
```
❌ PDF 파일을 열 수 없습니다. (암호화됨)
```

**해결 방안:**
- 비밀번호 해제 후 분석
- 또는 비밀번호를 코드에 추가 (보안 주의)

**분석 성공률:** ⭐ (0%)

---

### 3. 복잡한 레이아웃 PDF
**특징:**
- 다단 레이아웃
- 복잡한 테이블 구조
- 텍스트와 그래픽이 복잡하게 얽힘
- 텍스트 순서가 논리적이지 않음

**예시:**
- 브로셔 (Brochure)
- 디자인이 화려한 매뉴얼

**분석 실패 이유:**
- 텍스트는 추출되지만 순서가 뒤섞임
- AI가 정보를 제대로 파악하지 못함

**분석 성공률:** ⭐⭐ (30-50%)

---

### 4. 손상된 PDF
**특징:**
- 파일이 손상됨
- 일부 페이지가 누락됨
- PDF 뷰어에서도 제대로 열리지 않음

**예시:**
- 다운로드 중 손상된 파일
- 오래된 파일 형식

**분석 실패 이유:**
```
❌ PDF 파일을 읽을 수 없습니다.
```

**분석 성공률:** ⭐ (0%)

---

## 🔍 PDF 형식 확인 방법

### 방법 1: 텍스트 선택 테스트
1. PDF를 PDF 뷰어로 엽니다
2. 텍스트를 마우스로 드래그해 선택해봅니다
3. **선택 가능** → 텍스트 기반 PDF ✅
4. **선택 불가능** → 이미지 PDF ❌

### 방법 2: 파일 크기 확인
- **텍스트 기반 PDF**: 보통 1-10MB
- **이미지 PDF**: 보통 10MB 이상 (고해상도 스캔)

### 방법 3: PDF 속성 확인
- PDF 뷰어에서 "속성" 또는 "문서 정보" 확인
- "텍스트 레이어" 또는 "Fonts" 정보 확인

---

## 📊 실제 테스트 결과 (예상)

| 문서 유형 | 예시 파일 | 분석 가능 여부 | 비고 |
|---------|----------|--------------|------|
| 오너스 매뉴얼 (최신) | `Beneteau 473 Owner's Manual_compressed.pdf` | ✅ 가능 | 텍스트 기반 |
| 클래스 규칙서 | `rulebook.pdf`, `TP52_CR20220124.pdf` | ✅ 가능 | 간단한 레이아웃 |
| 브로셔 | `Xp44-Brochure_July2018_ONLINE.pdf` | ⚠️ 부분 가능 | 복잡한 레이아웃 |
| 스캔된 매뉴얼 | (오래된 문서) | ❌ 불가능 | OCR 필요 |
| 한글 문서 | `정비 관련 자료.pdf` | ⚠️ 부분 가능 | 인코딩 문제 가능 |

---

## 🛠️ 개선 방안

### 1. OCR 기능 추가
**필요 기술:**
- Tesseract OCR
- Google Cloud Vision API
- Azure Computer Vision

**구현 예시:**
```python
from pdf2image import convert_from_path
import pytesseract

def extract_text_with_ocr(pdf_path):
    """OCR을 사용한 텍스트 추출"""
    images = convert_from_path(pdf_path)
    text = ""
    for image in images:
        text += pytesseract.image_to_string(image, lang='eng')
    return text
```

### 2. PDF 전처리
- 이미지 품질 개선
- 노이즈 제거
- 대비 조정

### 3. 복잡한 레이아웃 처리
- 테이블 인식 (camelot, tabula-py)
- 레이아웃 분석 (layoutparser)
- 텍스트 순서 재정렬

---

## 💡 권장 사항

### 사용자에게 권장할 PDF 형식:
1. ✅ **텍스트 기반 PDF** (최우선)
2. ✅ **간단한 레이아웃** (단순한 매뉴얼)
3. ⚠️ **하이브리드 PDF** (가능하지만 일부 정보 누락 가능)
4. ❌ **이미지 PDF** (OCR 기능 추가 전까지 불가능)

### PDF 변환 방법:
1. **스캔된 PDF → 텍스트 PDF 변환:**
   - Adobe Acrobat Pro: "텍스트 인식" 기능
   - 온라인 OCR 서비스 사용
   - Google Drive: 업로드 후 Google Docs로 변환

2. **복잡한 레이아웃 → 단순화:**
   - PDF 편집 도구로 불필요한 그래픽 제거
   - 텍스트만 추출하여 새 PDF 생성

---

## 📝 요약

| PDF 형식 | 분석 가능 | 성공률 | 개선 필요 |
|---------|---------|--------|----------|
| 텍스트 기반 PDF | ✅ | 95%+ | - |
| 하이브리드 PDF | ✅ | 70-90% | - |
| 간단한 레이아웃 | ✅ | 90%+ | - |
| 복잡한 레이아웃 | ⚠️ | 30-50% | 레이아웃 분석 |
| 이미지 PDF | ❌ | 0-10% | OCR 기능 |
| 암호화 PDF | ❌ | 0% | 비밀번호 처리 |
| 손상된 PDF | ❌ | 0% | - |

---

## 🔗 참고 자료

- [PyPDF2 문서](https://pypdf2.readthedocs.io/)
- [pdfplumber 문서](https://github.com/jsvine/pdfplumber)
- [Tesseract OCR](https://github.com/tesseract-ocr/tesseract)
- [PDF 텍스트 추출 가이드](https://www.adobe.com/acrobat/resources/how-to-extract-text-from-pdf.html)

---

**작성일:** 2025-01-XX  
**최종 업데이트:** 2025-01-XX

